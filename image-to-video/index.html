<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Image to Video</title>
    <meta name="description" content="Flux Kontext AI is a revolutionary free AI text-to-image editing tool. Instantly make precise, consistent edits to your photos and digital art using natural language instructions. Enjoy character consistency, fast results, and professional-grade image enhancement. No watermark, no registration required. Try Flux Kontext for creative, accurate, and user-friendly AI image editing.">
    <meta name="keywords" content="photo hd converter, ai image upscaler, image quality enhancer, 4k image upscaler, image resolution enhancer, photo quality improver, ai photo enhancement, upscale image online, free image upscaler, batch image upscaler, image enlarger without quality loss, hd photo converter online, ai image enhancement tool, photo resolution increaser">
    <script src="../tailwind.js"></script>
    <link rel="stylesheet" href="../tailwind.css">
    <link rel="stylesheet" href="../css/home.css">
    <link rel="canonical" href="https://flux-kontext-ai.org"/>
    <link rel="icon" href="../img/logo.png" type="image/x-icon">
    
    <script src="../js/my-local-storage-util.js"></script>
    <script src="../js/my-login.js"></script>
    <script src="../js/my_nav.js"></script>
    <script src="../js/custom-toast.js"></script>
    <script src="../js/my-common-util.js"></script>
    <script src="../js/my-dropdown-menu.js"></script>
    <script src="../js/my-loading-util.js"></script>
    <script src="../js/my-footer.js"></script>
    
    <script src="../js/my-lan-config.js"></script>
    <script src="../js/my-lan-manager.js"></script>

    <style>
        /* 旋转小点动画（让 orbit 容器转起来） */
        @keyframes orbit-rot{from{transform:rotate(0)}to{transform:rotate(360deg)}}
        .orbit{animation:orbit-rot 2.6s linear infinite;will-change:transform}
        /* 轻微上下浮动（用于中心图标，可选） */
        @keyframes floaty{0%{transform:translateY(0)}50%{transform:translateY(-4px)}100%{transform:translateY(0)}}
        .floaty{animation:floaty 2.2s ease-in-out infinite}
    </style>

    <!-- 设置登录、初始化顶部导航、侧边栏 -->
    <script>
        // 设置导航条的按钮的点击事件
        init_nav_event ("../", 1);

        // 以下是自身页面的点击
        document.addEventListener('DOMContentLoaded', () => {

            // 选择模型 
            DropdownMenuUtil.init('id_btn_model', ['Google VOE3', 'Vidu', 'RunWay Gen-4'], 0, 1, 220, (item, index) => {
                console.log(`选择了: ${item}, 索引: ${index}  `);
                var text = document.getElementById('id_text_model');
                text.innerHTML = item;
                DropdownMenuUtil.hide();
            });

            // 选择分辨率
            DropdownMenuUtil.init('id_btn_resolution', ['480p', '960p', '1024p'], 0, 1, 220, (item, index) => {
                console.log(`选择了: ${item}, 索引: ${index}  `);
                var text = document.getElementById('id_text_resolution');
                text.innerHTML = item;
                DropdownMenuUtil.hide();
            });

            // 选择时长
            DropdownMenuUtil.init('id_btn_duration', ['5s', '10s', '30s'], 0, 1, 220, (item, index) => {
                console.log(`选择了: ${item}, 索引: ${index}  `);
                var text = document.getElementById('id_text_duration');
                text.innerHTML = item;
                DropdownMenuUtil.hide();
            });

            
        });
    </script>

</head>

<body class="bg-[#0f1115] text-gray-200">

    <!-- 通用顶部导航组件 -->
    <header class="fixed top-0 inset-x-0 h-14 bg-[#0b0d12]/90 backdrop-blur border-b border-white/5 z-50">
    </header>

    <!-- Sidebar + Main -->
    <div class="pt-14 mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-[260px,1fr] gap-4">

            <!-- 通用侧边栏组件 -->
            <aside class="hidden lg:block h-[calc(100vh-64px)] sticky top-14 bg-[#0b0e13] border border-white/5 rounded-lg overflow-hidden">
            </aside>

            <!-- Main -->
            <main class="min-h-[calc(100vh-64px)]">
                <div class="grid grid-cols-1 xl:grid-cols-[520px,1fr] gap-4">
                    <!-- Left form card -->
                    <section class="bg-[#0b0e13] border border-white/5 rounded-lg p-4">
                        <!-- 选择模型 -->
                        <div class="mt-4">
                            <label class="block text-sm text-gray-300 mb-1">选择模型</label>
                            <div class="relative mt-2 w-full sm:w-40">
                                <button id="id_btn_model" class="w-[220px] appearance-none px-3 py-2 pr-7 rounded bg-white/5 border border-white/10 text-sm hover:bg-white/8 focus:outline-none focus:ring-2 focus:ring-blue-500/40 flex items-center justify-between">
                                    <span id="id_text_model">Google VOE3</span>
                                    <svg class="w-4 h-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                                </button>
                            </div>
                        </div>

                        <!-- Input method -->
                        <div class="mt-4">
                            <label class="block text-sm text-gray-300 mb-1">图像</label>
                        </div>
                        <!-- Upload area -->
                        <div id="uploadCard" class="mt-2 relative rounded-lg border border-white/10 bg-[#0f131a] h-48 flex flex-col items-center justify-center text-sm cursor-pointer">
                            <!-- 默认内容 -->
                            <div id="uploadDefault" class="flex flex-col items-center justify-center">
                            <div class="w-11 h-11 rounded-full bg-[#1b2330] flex items-center justify-center mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-300">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 7.5L12 3m0 0L7.5 7.5M12 3v13.5" />
                                </svg>
                            </div>
                            <div class="text-gray-300">点击上传或拖拽到此处</div>
                            <div class="text-xs text-gray-500 mt-1">PNG, JPG, JPEG, GIF, WEBP</div>
                                <button id="chooseFile" class="mt-3 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded text-sm">
                                    选择图片</button>
                            </div>
                            <!-- 预览图片 -->
                            <img id="uploadPreview" src="" alt="preview" class="hidden absolute inset-0 w-full h-full object-contain p-3" />
                            <!-- 移除按钮（默认隐藏） -->
                            <button id="id_btn_remove_upload" class="hidden absolute bottom-2 right-2 px-3 py-1.5 bg-red-500/80 hover:bg-red-500 text-white text-xs rounded">移除</button>
                            <input id="fileInput" type="file" accept="image/*" class="hidden" />
                        </div>

                        <!-- 输入提示词 -->
                        <div class="mt-4">
                            <label class="block text-sm text-gray-300 mb-1">输入提示词</label>
                            <textarea id="id_prompt_input" rows="6" class="w-full mt-2 px-2 py-2 rounded bg-white/5 border border-white/10 focus:outline-none focus:ring-2 focus:ring-blue-500/40 text-sm" placeholder="描述你的视频..."></textarea>
                        </div>

                        <!-- 选择分辨率 -->
                        <div class="mt-4">
                            <label class="block text-sm text-gray-300 mb-1">选择分辨率</label>
                            <div class="relative w-full sm:w-40">
                                <!-- 触发按钮：宽度继承容器，右侧箭头 -->
                                <button id="id_btn_resolution" class="w-[220px] appearance-none px-3 py-2 pr-7 rounded bg-white/5 border border-white/10 text-sm hover:bg-white/8 focus:outline-none focus:ring-2 focus:ring-blue-500/40 flex items-center justify-between">
                                    <span id="id_text_resolution">480p</span>
                                    <svg class="w-4 h-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                                </button>
                            </div>
                        </div>

                        <!-- 选择时长 -->
                        <div class="mt-4">
                            <label class="block text-sm text-gray-300 mb-1">选择时长</label>
                            <div class="relative w-full sm:w-40">
                                <!-- 触发按钮：宽度继承容器，右侧箭头 -->
                                <button id="id_btn_duration" class="w-[220px] appearance-none px-3 py-2 pr-7 rounded bg-white/5 border border-white/10 text-sm hover:bg-white/8 focus:outline-none focus:ring-2 focus:ring-blue-500/40 flex items-center justify-between">
                                    <span id="id_text_duration">5s</span>
                                    <svg class="w-4 h-4 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                                </button>
                            </div>
                        </div>

                        <!-- 选择宽高比（与图片一致的卡片式样式） -->
                        <div class="mt-6">
                            <div class="flex items-end justify-between">
                                <div>
                                    <h3 class="text-white text-base font-semibold">Aspect Ratio</h3>
                                    <p class="text-gray-400 text-xs mt-1">Choose the appropriate aspect ratio.</p>
                                </div>
                            </div>
                            <!-- 隐藏域：存储当前选中的宽高比值，默认 9:16 -->
                            <input id="id_input_aspect_ratio" type="hidden" value="9:16">

                            <!-- 选择比例的布局 3:4  16:9 -->
                            <div id="id_group_aspect_ratio" class="mt-3 grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 gap-2 lg:gap-3">
                                <!-- 单个卡片：默认灰色；hover 与选中均为红色高亮 -->
                                <button data-value="16:9" class="ar-item group rounded-xl bg-white/5 border border-white/10 h-24 transition hover:ring-2 hover:ring-red-500/30 hover:border-red-500/40">
                                    <div class="h-full w-full p-3 relative">
                                        <!-- 预留标签空间，剩余高度中居中展示比例方块 -->
                                        <div class="h-full flex items-center justify-center pb-6">
                                            <!-- 16:9 预览块 -->
                                            <div class="ar-block w-14 h-8 rounded-md bg-white/10 group-hover:bg-red-500"></div>
                                        </div>
                                        <div class="ar-label absolute bottom-2 left-0 right-0 text-center text-gray-300 text-base group-hover:text-red-400 group-hover:font-semibold">16:9</div>
                                    </div>
                                </button>
                                <button data-value="9:16" class="ar-item group rounded-xl bg-white/5 border border-white/10 h-24 transition hover:ring-2 hover:ring-red-500/30 hover:border-red-500/40">
                                    <div class="h-full w-full p-3 relative">
                                        <div class="h-full flex items-center justify-center pb-6">
                                            <!-- 9:16 预览块 -->
                                            <div class="ar-block w-7 h-11 rounded-md bg-white/10 group-hover:bg-red-500"></div>
                                        </div>
                                        <div class="ar-label absolute bottom-2 left-0 right-0 text-center text-gray-300 text-base group-hover:text-red-400 group-hover:font-semibold">9:16</div>
                                    </div>
                                </button>
                                <button data-value="4:3" class="ar-item group rounded-xl bg-white/5 border border-white/10 h-24 transition hover:ring-2 hover:ring-red-500/30 hover:border-red-500/40">
                                    <div class="h-full w-full p-3 relative">
                                        <div class="h-full flex items-center justify-center pb-6">
                                            <!-- 4:3 预览块 -->
                                            <div class="ar-block w-12 h-9 rounded-md bg-white/10 group-hover:bg-red-500"></div>
                                        </div>
                                        <div class="ar-label absolute bottom-2 left-0 right-0 text-center text-gray-300 text-base group-hover:text-red-400 group-hover:font-semibold">4:3</div>
                                    </div>
                                </button>
                                <button data-value="3:4" class="ar-item group rounded-xl bg-white/5 border border-white/10 h-24 transition hover:ring-2 hover:ring-red-500/30 hover:border-red-500/40">
                                    <div class="h-full w-full p-3 relative">
                                        <div class="h-full flex items-center justify-center pb-6">
                                            <!-- 3:4 预览块 -->
                                            <div class="ar-block w-9 h-12 rounded-md bg-white/10 group-hover:bg-red-500"></div>
                                        </div>
                                        <div class="ar-label absolute bottom-2 left-0 right-0 text-center text-gray-300 text-base group-hover:text-red-400 group-hover:font-semibold">3:4</div>
                                    </div>
                                </button>
                                <button data-value="1:1" class="ar-item group rounded-xl bg-white/5 border border-white/10 h-24 transition hover:ring-2 hover:ring-red-500/30 hover:border-red-500/40">
                                    <div class="h-full w-full p-3 relative">
                                        <div class="h-full flex items-center justify-center pb-6">
                                            <!-- 1:1 预览块 -->
                                            <div class="ar-block w-10 h-10 rounded-md bg-white/10 group-hover:bg-red-500"></div>
                                        </div>
                                        <div class="ar-label absolute bottom-2 left-0 right-0 text-center text-gray-300 text-base group-hover:text-red-400 group-hover:font-semibold">1:1</div>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <!-- 积分要求信息 -->
                        <div class="mt-4 flex items-center gap-2 text-sm text-gray-400">
                            <img src="../img/credit_solid.png" alt="credit_cart" class="w-4 h-4">
                            <span>Credits required: </span>
                            <span id="id_credit_required_number">20</span>
                        </div>

                        <!-- 生成按钮 -->
                        <div class="mt-3 flex items-center gap-3">
                            <button id="id_btn_generate" class="w-full py-3 rounded-[8px] bg-red-600 hover:bg-red-500 text-white font-medium text-lg flex items-center justify-center gap-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-500">
                                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                                <span>生成预览</span>
                            </button>
                        </div>
                    </section>

                    <!-- 右侧显示卡片和生成结果的区域 -->
                    <section class="bg-[#0b0e13] border border-white/5 rounded-lg p-3">
                        <div class="text-xs text-gray-400 mb-2">由 Seedance 1.0 Pro 驱动</div>
                        <div class="relative aspect-video bg-[#0f131a] rounded-lg overflow-hidden border border-white/10">
                            
                            <img id="id_preview_image" src="../img/image_content3.jpg" alt="preview" class="w-full h-full object-cover hidden" />
                            
                            <video id="id_preview_video" class="w-full h-full object-cover" autoplay loop muted playsinline>
                                <source src="https://www.muse-steamer.com/caseVideos/e75beee00148cbf0a28c0cfcf2fdc199_1920_1080.mp4" type="video/mp4">
                            </video>
                            
                            <div id="id_loading_layout" class="absolute inset-0 bg-black/60 backdrop-blur hidden flex items-center justify-center">
                                <div class="text-center">
                                    <div class="relative w-20 h-20 mx-auto">
                                        <div class="absolute inset-0 rounded-full bg-gradient-to-br from-blue-500/25 to-cyan-500/25 blur-xl"></div>
                                        <div class="absolute inset-[6px] rounded-full bg-white/5 border border-white/10"></div>
                                        <div class="absolute inset-0 flex items-center justify-center">
                                            <svg class="w-9 h-9 text-blue-300 animate-pulse floaty" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v4M12 17v4M3 12h4M17 12h4"/><path d="M7 17l10-10"/></svg>
                                        </div>
                                        <!-- 环绕小点 -->
                                        <div class="absolute inset-0 orbit">
                                            <span class="absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-blue-400"></span>
                                            <span class="absolute top-1/2 -right-1 -translate-y-1/2 w-1.5 h-1.5 rounded-full bg-cyan-400"></span>
                                            <span class="absolute -bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-sky-400"></span>
                                            <span class="absolute top-1/2 -left-1 -translate-y-1/2 w-2 h-2 rounded-full bg-indigo-400"></span>
                                        </div>
                                    </div>
                                    <div class="mt-4 text-gray-200">正在为你创作…</div>
                                    <div class="text-xs text-gray-400 mt-1">您可以继续流量其他部分功能，完成后可以在作品页查看</div>
                                </div>
                            </div>
                            
                            <!-- 失败遮罩 -->
                            <div id="id_result_error" class="hidden absolute inset-0 bg-black/50 backdrop-blur flex items-center justify-center text-center">
                                <div>
                                    <div class="mx-auto w-12 h-12 rounded-full bg-red-500/20 text-red-400 flex items-center justify-center mb-3">
                                        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 9v4M12 17h.01"/><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></svg>
                                    </div>
                                    <div class="text-white font-medium">生成失败</div>
                                    <div class="text-xs text-gray-400 mt-1">Insufficient credits</div>
                                </div>
                            </div>

                        </div>
                        <div class="mt-3">
                            <div class="text-sm text-gray-300 mb-1">提示词</div>
                            <div id="id_prompt_result" class="text-xs text-gray-400 bg-white/5 border border-white/10 rounded p-3 leading-6">
                                The ice blue Porsche speeds out from the night's high-rise...
                            </div>
                        </div>
                    </section>
                    
                </div>

                <!-- Veo3 产品介绍（通用模块：标题 + 亮点 + 口碑 + FAQ + CTA） -->
                <section class="bg-[#0b0e13] border border-white/5 mt-4 rounded-lg p-4 lg:p-6">
                    <!-- 标题与简介 -->
                    <div class="text-center mb-6 lg:mb-8">
                        <h2 class="text-xl lg:text-2xl font-bold mb-3 lg:mb-4">
                            <span class="text-white">Veo3</span>
                            <span class="bg-gradient-to-r from-purple-400 to-purple-600 bg-clip-text text-transparent"> 音频视频生成器</span>
                        </h2>
                        <p class="text-gray-300 text-sm leading-6 max-w-3xl mx-auto">
                            基于前沿的视频生成大模型，Veo3 为图片到视频、文本到视频提供一站式创作能力。它支持镜头运动、风格化控制、角色一致性
                            与原生音频合成，让作品兼具“画面张力”和“声音叙事”。无论你是营销团队、工作室，还是独立创作者，都能以更低成本、
                            更高效率产出专业级短片。
                        </p>
                    </div>

                    <!-- 核心能力亮点（3列，移动端1列） -->
                    <div class="text-center mb-4">
                        <h3 class="text-lg font-semibold text-white">核心能力亮点</h3>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4 mb-6 lg:mb-10">
                        <div class="bg-[#151924] border border-white/10 rounded-xl p-4">
                            <div class="w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center mb-3">
                                <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>
                            </div>
                            <h4 class="text-white font-semibold mb-2">原生音频 · 同步对白/音乐/音效</h4>
                            <p class="text-gray-400 text-sm leading-6">一键生成多轨音频并自动与画面对齐，免去复杂的配乐与音效剪辑工作，直出即可用于社媒与广告物料。</p>
                        </div>
                        <div class="bg-[#151924] border border-white/10 rounded-xl p-4">
                            <div class="w-12 h-12 bg-indigo-500/20 rounded-full flex items-center justify-center mb-3">
                                <svg class="w-6 h-6 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            </div>
                            <h4 class="text-white font-semibold mb-2">镜头/运动/风格控制</h4>
                            <p class="text-gray-400 text-sm leading-6">支持提示词指定景别、机位、运动轨迹与光影风格；可套用预设并叠加微调，保证画面统一和风格一致。</p>
                        </div>
                        <div class="bg-[#151924] border border-white/10 rounded-xl p-4">
                            <div class="w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center mb-3">
                                <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                            </div>
                            <h4 class="text-white font-semibold mb-2">更清晰的画质与角色一致性</h4>
                            <p class="text-gray-400 text-sm leading-6">720P 清晰度、细节保真与运动连贯性优化，人物与主体在多个镜头中保持一致，适合品牌物料与剧情短片。</p>
                        </div>
                    </div>

                    <!-- 口碑评价（6卡：1/2/3列自适应） -->
                    <div class="text-center mb-4">
                        <h3 class="text-lg font-semibold text-white">创作者如何评价</h3>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4 mb-6 lg:mb-10">
                        <div class="bg-[#141820] border border-white/10 rounded-xl p-4"><div class="text-white font-semibold">亚历克斯，创意总监</div><div class="mt-2 text-yellow-400">★★★★★</div><p class="mt-3 text-gray-400 text-sm leading-6">节省了数小时的后期制作成本，现在我们可以在几分钟内从概念生成艺术短场景。</p></div>
                        <div class="bg-[#141820] border border-white/10 rounded-xl p-4"><div class="text-white font-semibold">米娅，婚礼工作室老板</div><div class="mt-2 text-yellow-400">★★★★★</div><p class="mt-3 text-gray-400 text-sm leading-6">将一张照片动画化并构建完整氛围是不可思议的，我的客户都惊呆了。</p></div>
                        <div class="bg-[#141820] border border-white/10 rounded-xl p-4"><div class="text-white font-semibold">杰森，广告代理机构策略师</div><div class="mt-2 text-yellow-400">★★★★★</div><p class="mt-3 text-gray-400 text-sm leading-6">从静态到影像的转化极大提升了创作效率，也改变了我们的视频制作流程。</p></div>
                        <div class="bg-[#141820] border border-white/10 rounded-xl p-4"><div class="text-white font-semibold">莉拉，数字艺术家</div><div class="mt-2 text-yellow-400">★★★★★</div><p class="mt-3 text-gray-400 text-sm leading-6">终于有一个真正理解创意提示的工具，我的艺术第一次感觉如此生动。</p></div>
                        <div class="bg-[#141820] border border-white/10 rounded-xl p-4"><div class="text-white font-semibold">托马斯，独立电影制作人</div><div class="mt-2 text-yellow-400">★★★★★</div><p class="mt-3 text-gray-400 text-sm leading-6">拍摄前做试镜头非常有用，仅一张图片的运动看起来出奇真实。</p></div>
                        <div class="bg-[#141820] border border-white/10 rounded-xl p-4"><div class="text-white font-semibold">萨拉，社交媒体创作者</div><div class="mt-2 text-yellow-400">★★★★★</div><p class="mt-3 text-gray-400 text-sm leading-6">一个提示就能把照片变成动感短片，非常适合在 Instagram 讲故事。</p></div>
                    </div>

                    <!-- FAQ -->
                    <div class="text-center mb-4">
                        <h3 class="text-lg font-semibold text-white">常见问题</h3>
                    </div>
                    <div class="space-y-4 mb-6 lg:mb-10">
                        <div class="bg-[#151924] border border-white/10 rounded-xl p-4"><div class="flex items-start gap-3"><span class="shrink-0 w-6 h-6 rounded-full bg-purple-500/20 text-purple-300 flex items-center justify-center text-sm">1</span><div><h4 class="text-white font-semibold">什么是图像转视频生成器？</h4><p class="mt-1 text-gray-400 text-sm leading-6">它是将静态图片转化为动态视频的AI工具，特别适合广告创意、产品展示与社交媒体内容，帮助你以更低成本快速产出专业短片。</p></div></div></div>
                        <div class="bg-[#151924] border border-white/10 rounded-xl p-4"><div class="flex items-start gap-3"><span class="shrink-0 w-6 h-6 rounded-full bg-blue-500/20 text-blue-300 flex items-center justify-center text-sm">2</span><div><h4 class="text-white font-semibold">需要设计或剪辑基础吗？</h4><p class="mt-1 text-gray-400 text-sm leading-6">不需要。上传图片与提示词，选择时长与宽高比，即可自动生成。也可叠加风格预设获得一致的品牌表现。</p></div></div></div>
                        <div class="bg-[#151924] border border-white/10 rounded-xl p-4"><div class="flex items-start gap-3"><span class="shrink-0 w-6 h-6 rounded-full bg-green-500/20 text-green-300 flex items-center justify-center text-sm">3</span><div><h4 class="text-white font-semibold">可以自定义结果风格吗？</h4><p class="mt-1 text-gray-400 text-sm leading-6">支持。你可以通过提示词与参数控制风格、镜头与运动；也可以使用预设模板快速复用配置，适用于团队协作。</p></div></div></div>
                    </div>

                    <!-- CTA -->
                    <div class="rounded-2xl p-5 lg:p-8 bg-gradient-to-r from-indigo-500/30 via-purple-500/30 to-pink-500/30 border border-white/10">
                        <div class="text-center">
                            <h3 class="text-xl lg:text-2xl font-bold text-white">准备让你的图片动起来了吗？</h3>
                            <p class="text-gray-200 text-sm lg:text-base mt-2 max-w-3xl mx-auto">加入数千创作者，用 Seedance AI 将静态图片转为精彩短片。今天升级，解锁更快渲染与更高质量，并优先体验顶级模型。</p>
                            <div class="mt-4">
                                <a href="#" class="inline-flex items-center justify-center px-5 py-2.5 rounded-[10px] bg-red-600 hover:bg-red-700 text-white text-sm lg:text-base">立即开始创作</a>
                            </div>
                        </div>
                    </div>
                </section>


                <!-- 通用页脚组件 -->
                <footer class="bg-[#0A0A0B] text-white py-12 md:py-20">
                    <!-- footer.js 会将内容注入到这里 -->
                </footer>

            </main>
        </div>
    </div>


    <script>
        console.log('开始执行js代码 ....');

        // Input method
        const imUpload = document.getElementById('im-upload');
        const uploadCard = document.getElementById('uploadCard');

        // Upload
        const fileInput = document.getElementById('fileInput');

        // 生成视频
        const id_btn_generate = document.getElementById('id_btn_generate');
        const id_preview_image = document.getElementById('id_preview_image');
        const id_preview_video = document.getElementById('id_preview_video');
        const id_result_error = document.getElementById('id_result_error');
        const id_loading_layout = document.getElementById('id_loading_layout');
        
        uploadCard.addEventListener('dragover',e=>{e.preventDefault();uploadCard.classList.add('ring-2','ring-blue-500/40')});
        uploadCard.addEventListener('dragleave',()=>uploadCard.classList.remove('ring-2','ring-blue-500/40'));
        uploadCard.addEventListener('drop',e=>{e.preventDefault();uploadCard.classList.remove('ring-2','ring-blue-500/40'); if(e.dataTransfer.files[0]) handleFile(e.dataTransfer.files[0]);});
        fileInput.addEventListener('change',e=>{if(e.target.files[0]) handleFile(e.target.files[0]);});
        
        function handleFile(file){
            if(!file || !file.type || !file.type.startsWith('image/')) return;
            // 显示预览
            const url = URL.createObjectURL(file);
            const preview = document.getElementById('uploadPreview');
            const btnRemove = document.getElementById('id_btn_remove_upload');
            const uploadDefault = document.getElementById('uploadDefault');
            if(preview && btnRemove && uploadDefault){
                preview.src = url;
                preview.classList.remove('hidden');
                btnRemove.classList.remove('hidden');
                uploadDefault.classList.add('hidden');
            }
        }


        // 绑定宽高比选择
        function bindAspectRatioSelect(){
            // 容器、隐藏域
            var group = document.getElementById('id_group_aspect_ratio');
            var input = document.getElementById('id_input_aspect_ratio');
            if(!group || !input){ console.warn('【宽高比初始化】未找到控件'); return; }
            var items = group.querySelectorAll('.ar-item');

            // 切换选中样式的函数
            function setActive(target){
                for(var i=0;i<items.length;i++){
                    items[i].classList.remove('ar-active','ring-2','ring-red-500/30','border-red-500/40');
                    // 将文字与占位颜色恢复（默认灰色）
                    var label = items[i].querySelector('.ar-label');
                    var block = items[i].querySelector('.ar-block');
                    if(label){ label.classList.remove('text-red-400','font-semibold'); label.classList.add('text-gray-300'); }
                    if(block){ block.classList.remove('bg-red-500'); block.classList.add('bg-white/10'); }
                }
                target.classList.add('ar-active','ring-2','ring-red-500/30','border-red-500/40');
                var label2 = target.querySelector('.ar-label');
                var block2 = target.querySelector('.ar-block');
                if(label2){ label2.classList.remove('text-gray-300'); label2.classList.add('text-red-400','font-semibold'); }
                if(block2){ block2.classList.remove('bg-white/10'); block2.classList.add('bg-red-500'); }
            }

            // 绑定点击事件
            for(var j=0;j<items.length;j++){
                (function(el){
                    el.addEventListener('click', function(){
                        var val = el.getAttribute('data-value');
                        input.value = val; // 写入隐藏域
                        setActive(el);    // 切换高亮
                        console.log('【宽高比变更】新值 =', val);
                    });
                })(items[j]);
            }

            // 根据隐藏域初始值设置一次选中
            var init = input.value || '9:16';
            for(var k=0;k<items.length;k++){
                if(items[k].getAttribute('data-value') === init){ setActive(items[k]); break; }
            }
            console.log('【宽高比初始化】完成，默认 =', input.value);
        }

        bindAspectRatioSelect ();

        // 生成视频 按钮
        id_btn_generate.addEventListener('click', function(){
            if(id_btn_generate.disabled) {
                return; // 如果按钮被禁用，不执行操作
            }

            showLoading();
            // 生成过程中禁用按钮
            setGenerateButtonState(false);
            startGenerate  (); // 开始真正生成
            
            // simulate().then(function(res){
            //     // 到点后再切换，防止外部其它逻辑提前把 loader 隐藏
            //     if(res.ok){ 
            //         if (res.index == 1) {
            //             showSuccess(res.url); 
            //         } else if (res.index == 2) {
            //             showSuccess(res.url); 
            //         }
            //     }
            //     else { 
            //         showError(); 
            //     }
            //     // 生成完成后重新启用按钮
            //     setGenerateButtonState(true);
            // });
        });

        async function startGenerate() {
            // 仅图片生成视频面板
            if (!isLoggedIn) { login(); return; }

            try {
                // 收集表单数据（当前页面只有图生视频）
                var hasFile = fileInput && fileInput.files && fileInput.files[0];
                var promptEl = document.getElementById('id_prompt_input');
                var prompt = promptEl ? promptEl.value.trim() : '';
                var arEl = document.getElementById('id_input_aspect_ratio');
                var aspectRatio = arEl ? arEl.value : '';
                var resolution = (document.getElementById('id_text_resolution')||{}).innerText || '';
                var duration = (document.getElementById('id_text_duration')||{}).innerText || '';

                if (!hasFile) { alert('Please upload a reference image'); return; }
                if (!prompt) { alert('Please enter a prompt'); return; }

                // 加载中
                LoadingUtil.show('Generating Video', 'AI is creating your baby video, please wait...');

                // 组装表单
                const formData = new FormData();
                formData.append('file', fileInput.files[0]);

                const jsonData = {
                    "opt": "1", // 当前为图片转视频
                    "uid": localUser ? localUser.uid : 0,
                    "my_token": localUser ? localUser.token : "",
                    "project_id": GlobalConfig.project_id,
                    "product_id": GlobalConfig.product_id,
                    "device_info": "6789",

                    "prompt": prompt,
                    "model": GlobalConfig.default_model,
                    "title": "Baby Video",
                    "tags": "funny,video"
                    // "aspect_ratio": aspectRatio,
                    // "resolution": resolution,
                    // "duration": duration,
                    // "safety_tolerance": 2,
                    // "seed": 0
                };
                formData.append('param', JSON.stringify(jsonData));

                console.log('param str :: ', JSON.stringify(jsonData));
                console.log('formData :: ', formData);

                const response = await fetch(GlobalConfig.url + "/go/v/cr", { method: 'POST', body: formData });
                const result = await response.json();
                console.log("Processing result:", result);

                if (response.ok && result.code === 200) {
                    // 兜底解析可播放地址
                    var data = result.data || {};
                    var url = data.result_url;
                    console.log('url :: ', url);
                    if (url) {
                        showSuccess(url);
                    } else {
                        showError();
                        alert('Generation succeeded but no playable url returned');
                    }
                } else if (result.code === 1000018) {
                    alert('Insufficient credits, please recharge');
                    showError();
                } else {
                    console.log(result.msg || 'Processing failed');
                    showError();
                    alert('Video generation failed: ' + (result.msg || 'Unknown error'));
                }
            } catch (error) {
                console.error('Processing failed:', error);
                showError();
                alert('Video generation failed: ' + error.message);
            } finally {
                LoadingUtil.hide();
                setGenerateButtonState(true);
            }
        }
        
        
        function simulate(){
            return new Promise(function(resolve){
                setTimeout(function(){
                    var index =    2; // 0: 失败 1图片 2视频
                    if (index == 0) {
                        resolve({ok:false, index:0});
                    } else if (index == 1) {
                        resolve({ok:true, index:1, url:'https://babyaivideogenerator.online/img/ai_baby_video_generator.mp4'});
                    } else if (index == 2) {
                        resolve({ok:true, index:2, url:'http://127.0.0.1:5500/img/image_content12.jpg'});
                    }
                },4*1000);
            });
        }

        // ------- 生成状态模拟（仅控制右侧已有容器，不改其他逻辑） -------
        function showLoading(){
            hideAll ();
            id_loading_layout.classList.remove('hidden');
        }
        function showError(){
            hideAll ();
            id_result_error.classList.remove('hidden');
        }
        function showSuccess(url){
            hideAll();
            var isVideo = /\.(mp4|webm|ogg)(\?.*)?$/i.test(url);
            if(isVideo){
                try{ id_preview_video.innerHTML=''; var s=document.createElement('source'); s.src=url; s.type='video/mp4'; id_preview_video.appendChild(s); id_preview_video.load(); }catch(_){ }
                id_preview_video.classList.remove('hidden');
            }else{
                id_preview_image.src = url;
                id_preview_image.classList.remove('hidden');
            }
        }

        function hideAll(){
            id_preview_image.classList.add('hidden');
            id_preview_video.classList.add('hidden');
            id_result_error.classList.add('hidden');
            id_loading_layout.classList.add('hidden');
        }

        // ------- 生成状态模拟结束 -------

        // 设置生成按钮状态的函数
        function setGenerateButtonState(enabled) {
            var btn = document.getElementById('id_btn_generate');
            if(!btn) return;
            
            if(enabled) {
                // 启用状态：可点击，红色背景，有hover效果
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed', 'bg-gray-600', 'text-gray-400');
                btn.classList.add('bg-red-600', 'text-white', 'hover:bg-red-700');
            } else {
                // 禁用状态：不可点击，深灰色背景，深灰色文字
                btn.disabled = true;
                btn.classList.add('opacity-100', 'cursor-not-allowed', 'bg-gray-600', 'text-gray-400');
                btn.classList.remove('bg-red-600', 'text-white', 'hover:bg-red-700');
            }
        }

        // 页面加载完成后，默认禁用按钮
        document.addEventListener('DOMContentLoaded', function() {
            setGenerateButtonState(false);
            
            // 监听提示词输入框，根据内容动态设置按钮状态
            var promptInput = document.getElementById('id_prompt_input');
            if(promptInput) {
                // 初始检查一次
                checkPromptInput();
                
                // 实时监听所有可能的输入事件
                promptInput.addEventListener('input', checkPromptInput);
                promptInput.addEventListener('keyup', checkPromptInput);
                promptInput.addEventListener('keydown', checkPromptInput);
                promptInput.addEventListener('paste', checkPromptInput);
                promptInput.addEventListener('cut', checkPromptInput);
                promptInput.addEventListener('change', checkPromptInput);
                
                // 添加中文日志，方便调试
                console.log('【提示词监听】已绑定实时监听事件');
            } else {
                console.warn('【提示词监听】未找到输入框元素');
            }
        });
        
        // 检查提示词输入框内容的函数
        function checkPromptInput() {
            var promptInput = document.getElementById('id_prompt_input');
            if(!promptInput) return;
            
            var content = promptInput.value.trim(); // 去除首尾空格
            var hasContent = content.length > 0;
            
            if(hasContent) {
                // 有内容时启用按钮
                setGenerateButtonState(true);
                console.log('【提示词监听】检测到内容，启用生成按钮');
            } else {
                // 无内容时禁用按钮
                setGenerateButtonState(false);
                console.log('【提示词监听】内容为空，禁用生成按钮');
            }
        }

        // 点击上传区域/按钮，触发系统选择
        uploadCard.addEventListener('click', function(e){
            // 避免点击移除按钮时也触发
            if(e.target && (e.target.id === 'id_btn_remove_upload')) return;
            fileInput && fileInput.click();
        });

        // 移除按钮：恢复默认样式
        (function(){
            var btnRemove = document.getElementById('id_btn_remove_upload');
            var preview = document.getElementById('uploadPreview');
            var uploadDefault = document.getElementById('uploadDefault');
            if(btnRemove){
                btnRemove.addEventListener('click', function(e){
                    e.stopPropagation();
                    // 清空文件并还原
                    try{ fileInput.value = ''; }catch(_){ }
                    if(preview){ preview.src=''; preview.classList.add('hidden'); }
                    if(uploadDefault){ uploadDefault.classList.remove('hidden'); }
                    btnRemove.classList.add('hidden');
                });
            }
        })();

    </script>

</body>
</html>

